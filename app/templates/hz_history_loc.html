<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta charset="utf-8" />
<title>和仲位置服务平台</title>
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />

<!-- bootstrap & fontawesome -->
<link rel="stylesheet" href="../static/ace/assets/css/bootstrap.css" />
<link rel="stylesheet" href="../static/ace/components/font-awesome/css/font-awesome.css" />

<!-- page specific plugin styles -->

<!-- text fonts -->
<link rel="stylesheet" href="../static/ace/assets/css/ace-fonts.css" />

<!-- ace styles -->
<link rel="stylesheet" href="../static/ace/assets/css/ace.css" class="ace-main-stylesheet" id="main-ace-style" />
<link rel="stylesheet" href="../static/ace/assets/css/ace-skins.css" />
<link rel="stylesheet" href="../static/ace/assets/css/ace-rtl.css" />

<!-- svg样式 -->
<link rel="stylesheet" href="/static/js/jquery.svg.package-1.5.0/jquery.svg.css">

<!-- inline styles related to this page -->
<!--时间插件-->

<link rel="stylesheet" href="../static/ace/components/bootstrap-datetimepicker-master/css/bootstrap-datetimepicker.min.css"/>

<!-- ace settings handler -->
<script src="../static/ace/assets/js/ace-extra.js"></script>
<link rel="shortcut icon" href="/static/img/favicon.ico" />
<link rel="bookmark" href="/static/img/favicon.ico" type="image/x-icon" />
</head>

<body class="no-skin"  style=" min-width:1905px;">
<!-- #section:basics/navbar.layout -->
<div id="navbar" class="navbar navbar-default          ace-save-state" style=" min-width:190px;">
  <div class="navbar-container ace-save-state" id="navbar-container"> 
    <!-- #section:basics/sidebar.mobile.toggle -->
    <button type="button" class="navbar-toggle menu-toggler pull-left" id="menu-toggler" data-target="#sidebar"> <span class="sr-only">Toggle sidebar</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button>
    
    <!-- /section:basics/sidebar.mobile.toggle -->
    <div class="navbar-header pull-left"> 
      <!-- #section:basics/navbar.layout.brand --> 
      <a href="#" class="navbar-brand" style="padding-top:0; padding-bottom:0;"> <img src="../static/img/logo.jpg" /> </a> 
      
      <!-- /section:basics/navbar.layout.brand --> 
      
      <!-- #section:basics/navbar.toggle --> 
      
      <!-- /section:basics/navbar.toggle --> 
    </div>
    
    <!-- #section:basics/navbar.dropdown -->
    <div class="navbar-buttons navbar-header pull-right" role="navigation">
      <ul class="nav ace-nav">
        
        <!-- #section:basics/navbar.user_menu -->
        <li class="light-blue dropdown-modal"> <a data-toggle="dropdown" href="#" class="dropdown-toggle"> <img class="nav-user-photo" src="../static/ace/assets/avatars/user.jpg" alt="Jason's Photo" /> <span class="user-info"> <small>欢迎登入,</small> 欧先生 </span> <i class="ace-icon fa fa-caret-down"></i> </a>
          <ul class="user-menu dropdown-menu-right dropdown-menu dropdown-yellow dropdown-caret dropdown-close">
            <li> <a href="#"> <i class="ace-icon fa fa-cog"></i> Settings </a> </li>
            <li> <a href="profile.html"> <i class="ace-icon fa fa-user"></i> Profile </a> </li>
            <li class="divider"></li>
            <li> <a href="#"> <i class="ace-icon fa fa-power-off"></i> Logout </a> </li>
          </ul>
        </li>
        
        <!-- /section:basics/navbar.user_menu -->
      </ul>
    </div>
    
    <!-- /section:basics/navbar.dropdown --> 
  </div>
  <!-- /.navbar-container --> 
</div>

<!-- /section:basics/navbar.layout -->
<div class="main-container ace-save-state" style="" id="main-container"> 
  <script type="text/javascript">
				try{ace.settings.loadState('main-container')}catch(e){}
			</script> 
  
  <!-- #section:basics/sidebar -->
  <div id="sidebar" class="sidebar                  responsive                    ace-save-state"> 
    <script type="text/javascript">
					try{ace.settings.loadState('sidebar')}catch(e){}
				</script>
    <div class="sidebar-shortcuts" id="sidebar-shortcuts">
      <div class="sidebar-shortcuts-large" id="sidebar-shortcuts-large">
        <button class="btn btn-success"> <i class="ace-icon fa fa-signal"></i> </button>
        <button class="btn btn-info"> <i class="ace-icon fa fa-pencil"></i> </button>
        
        <!-- #section:basics/sidebar.layout.shortcuts -->
        <button class="btn btn-warning"> <i class="ace-icon fa fa-users"></i> </button>
        <button class="btn btn-danger"> <i class="ace-icon fa fa-cogs"></i> </button>
        
        <!-- /section:basics/sidebar.layout.shortcuts --> 
      </div>
      
      <!--<div class="sidebar-shortcuts-mini" id="sidebar-shortcuts-mini">
						<span class="btn btn-success"></span>

						<span class="btn btn-info"></span>

						<span class="btn btn-warning"></span>

						<span class="btn btn-danger"></span>
					</div>--> 
    </div>
    <!-- /.sidebar-shortcuts -->
    
    <ul class="nav nav-list">
      <li class=""> <a href="http://192.168.1.119/token#"> <i class="menu-icon fa fa-tachometer"></i> <span class="menu-text"> 地图导航 </span> </a> <b class="arrow"></b> </li>
    </ul>
    <!-- /.nav-list --> 
    
    <!-- #section:basics/sidebar.layout.minimize -->
    <div class="sidebar-toggle sidebar-collapse" id="sidebar-collapse"> <i id="sidebar-toggle-icon" class="ace-icon fa fa-angle-double-left ace-save-state" data-icon1="ace-icon fa fa-angle-double-left" data-icon2="ace-icon fa fa-angle-double-right"></i> </div>
    
    <!-- /section:basics/sidebar.layout.minimize --> 
  </div>
  
  <!-- /section:basics/sidebar -->
  <div class="main-content">
    <div class="main-content-inner"> 
      <!-- #section:basics/content.breadcrumbs --> 
      
      <!-- /section:basics/content.breadcrumbs -->
      <div class="page-content">
        <div class="page-header">
          <h1>
          地图导航
          <h1>
        </div>
        
        <!-- /section:settings.box -->
        <div class="row">
          <div class="col-sm-12" >
          <!-- PAGE CONTENT BEGINS -->
          
          <style>
        #myCanvas{width: 1690px; height: 1860px;}
        #floor3 {
			width: 1700px; height: 860px;
            position: absolute;
            overflow: hidden;
            border: 2px solid #b94a48;
			top:460px; left:0px;
			}
        #svg_map{
            width: 1700px;
            height: 860px;
            position:absolute;
            overflow:hidden;
        }
        #svg_path{
            width: 1700px;
            height: 860px;
            position:absolute;
			z-index:10;
        }
 
    </style>
          <script src="/static/js/jquery.min.js"></script> 
          <script src="/static/js/jquery.svg.package-1.5.0/jquery.svg.js"></script> 
          <script src="/static/js/socket.io-1.3.5/socket.io.min.js"></script> 
           
          <script>

	//iii	
	 $(function(){
	 		
		 
		
			/**
			 * 向服务器发送 Ajax 请求，查询相关数据, POST方式
			 * @param url       请求 url
			 * @param txData    请求 参数，具体参数含义，见对应接口说明                  
			 
			 数据格式
			 
			 url = '/lbs/get_history_location';  访问地址 
            txData = {
                "userId": ["1918E00103AA"],     // "userId": ["all"] for all users
                "datetimeFrom": "2017-09-17 11:17:35",          // 按照时间段查询
                "datetimeTo": "2017-09-23 11:17:35",
                "compress": false       // 是否压缩，压缩的含义是，服务器会根据特定策略返回部分路径坐标。 保留参数
            };
			 */
			
			function ajaxRequest(url, txData) { 
				//接受到的数据 
				var ajaxData;
				$.ajax({
					url: url,
					async: false,
					type: 'POST',
					data: {data: JSON.stringify(txData)}
				}).done(function(data) {
					console.log('接口调用成功');
					console.log('receive:', data);
					 
					ajaxData = data;
					
					
					 
				}).fail(function(jqXHR, textStatus, errorThrown) {
					console.log('接口调用失败');
					ajaxData = false;
					
				 
				});
				 return ajaxData;
				 
			}
			
 
			
			
			$("#electronic-fence-alert-query-button").click(function(){
				electronicFenceAlertInfo();
			});
			
			function electronicFenceAlertInfo(){
					
					var userId,datetimeFrom,datetimeTo,page,rows,field,oper;
					//
					var data; //获取的数据
					
					var electronicFenceData;
					//页面输出内容
					var electronicFenceContent;
					
					
					userId = $("#electronic-fence-alert-user").val();
					
					if(userId == 0){
						alert('请选择查询用户');
						return;	
					}
					datetimeFrom = $("#electronic-fence-alert-start-time").val();
					datetimeTo = $("#electronic-fence-alert-end-time").val();
					
					page = $("#electronic-fence-page").val();
					if(page == ''){
						alert('请填写查询页数,默认请填1');
						return;	
					}
					rows = $("#electronic-fence-remenber-number").val();
					if(rows == ''){
						alert('请填写查询数据条数,默认请填100');
						return;	
					}
					
					field = $("#electronic-fence-alert-field").val();
					oper = $("#electronic-fence-alert-oper").val();
					
					
					
					
					
					url = '/lbs/get_electronic_rail_info';
					txData = {
						"userId": [userId], // "userId": ["all"] for all users
						"page": page,          // 查询的页码。 当记录很多时，需要分页查询。可选参数，默认为第一页
						"rows": rows,        // 当前页记录条数。可选参数。默认100条
						"sort": [{"field": field, "oper": oper}]       // 默认按照时间降序排序
							// 当前条件只支持 and 。
							// oper 取值： desc 降序（默认）， asc 升序。 可以不填oper，默认降序
							// 字段顺序 代表 查询时的排序顺序。
							// 目前支持 datetime, userId, room排序
					};
					
					if(datetimeFrom != ''){
						txData.datetimeFrom = 	datetimeFrom;
					}
					if(datetimeTo != ''){
						txData.datetimeTo = 	datetimeTo;
					}
					
					data = ajaxRequest(url, txData);
					
					if(data == false){
						alert('连接失败!');
						return;	
					}
					
					electronicFenceData = data.data.rows;
					
					var electronicFenceDataLength = electronicFenceData.length;
					
					if (electronicFenceDataLength == 0){
						alert('该检索范围没有数据');
						return;	
					}else{
						
						electronicFenceContent = '<h4 class="pink"><i class="ace-icon fa fa-hand-o-right icon-animated-hand-pointer blue"></i><a href="" role="button" class="green" data-toggle="modal"> 警告信息内容 </a></h4><div class="hr hr-18 dotted hr-double"></div><div class="col-xs-12"><!-- PAGE CONTENT BEGINS --><table id="simple-table" class="table  table-bordered table-hover"><thead><tr><th class="detail-col">建筑物ID</th><th>警报时间</th><th>楼层</th><th class="hidden-480">用户ID</th><th class="hidden-480">房间</th><th class="hidden-480">警告内容</th></tr></thead><tbody>';
							
					}
						
					
					
					for(var electronicFenceDataI = 0; electronicFenceDataI<electronicFenceDataLength; electronicFenceDataI++){
						
						var electronicFenceDataJuti = electronicFenceData[electronicFenceDataI];
						var electronicFenceDataJutiState;
						
					    if(electronicFenceDataJuti.status == 1){
							electronicFenceDataJutiState = '进入';
						}else if(electronicFenceDataJuti.status == 0){
							electronicFenceDataJutiState = '离开';
						}
						
						electronicFenceContent += '<tr><td>'+electronicFenceDataJuti.buildingId+'</td><td>'+electronicFenceDataJuti.datetime+'</td><td>'+electronicFenceDataJuti.floorNo+'</td><td>'+electronicFenceDataJuti.id+'</td><td>'+electronicFenceDataJuti.room+'</td><td>'+electronicFenceDataJutiState+'</td></tr>';
						
						electronicFenceDataJuti =null;
						electronicFenceDataJutiState = null;
					}
					
					
					  electronicFenceContent +='</tbody></table><div class="hr hr-18 dotted hr-double"></div>';
					  
					  $('#electronicFenceContent').html(electronicFenceContent);
					  
					  electronicFenceContent = null;
	 
					
			}
			
			
			
			
			
 
			
			
			
			
			
			
			//单位转换
			function unitConversion(number){
				return Math.round(number * real_loc_to_pix * zoom);
			}
			
			
			
	
			
			
			//以下为时间日历插件
			
				 
			
		 	     
 	 			 $('.date-timepicker').datetimepicker({
				 //ormat: 'MM/DD/YYYY h:mm:ss A',//use this option to display seconds
					  language: 'zh-CN',
					 format: 'yyyy-mm-dd hh:ii:ss',
					 autoclose: true,
					 
				});
				
				
 
		 

			
			
	 })


</script>
         <!--按钮区-->
         
          <div class="row">
 
                
                <div class="row">
              
              
              
                  <div class="col-xs-2">
   
                  		<div class="col-xs-4">
                         <label class="control-label no-padding-right pull-right">电子围栏警告信息:</label>
           				</div> 
                        <div class="col-sm-8">
                          <select id="electronic-fence-alert-user" >
                            <option value="0">请选择用户开启导航</option>
                            <option value="1918E00103AA">1918E00103AA</option>
                            <option value="1918E00103A9">1918E00103A9</option>
                          </select>
                    	</div>
        
                  </div>
                   
              
              
                 <div class="col-xs-4">
                  		<div class="col-xs-2">
                         <label class="control-label no-padding-right pull-right">查询时间:</label>
    					</div>	        
	                    
                        
                        <div class="col-xs-10">
                        
                            <span class="input-icon">
                                <input type="text" id="electronic-fence-alert-start-time" class="date-timepicker"  placeholder="查询起始时间" style="width:178px;"/>                            
                            </span>
    
                            <span class="input-icon input-icon-right">
                                <input type="text" id="electronic-fence-alert-end-time" class="date-timepicker" placeholder="查询截止时间" style="width:178px;"/>         
                            </span>

                	  	</div>
                        
                  </div>
                  <div class="col-xs-2">
 
                        <div class="col-xs-12">
                        
                            <span class="input-icon col-xs-6">
                                <input type="text"  id="electronic-fence-page"     placeholder="查询页码" value="1" style="width:78px;"/>                            
                            </span>
    
                            <span class="input-icon input-icon-right col-xs-6">
                                <input type="text"  id="electronic-fence-remenber-number"    placeholder="查询记录数" value="100" style="width:78px;"/>         
                            </span>

                	  	</div>
                        
                  </div>
                  <div class="col-xs-2">
   
                  		<div class="col-xs-4">
                         <label class="control-label no-padding-right pull-right">排序条件:</label>
           				</div> 
                        <div class="col-sm-4">
                          <select id="electronic-fence-alert-field" >
                            
                            <option value="datetime" selected="selected">时间</option>
                            <option value="userId">id</option>
                          </select>
                    	</div>
                        <div class="col-sm-4">
                          <select id="electronic-fence-alert-oper" >
                             
                            <option value="asc ">升序</option>
                            <option value="desc "  selected="selected">降序</option>
                          </select>
                    	</div>
        
                  </div>
                  
                  
                  
                  
                  
                  <div class="col-xs-2">
                            <button class="btn btn-info btn-sm" id="electronic-fence-alert-query-button">查询</button>
                        </div>
                  
                  
              
              
              
              
              
              
              
              </div>
              <div class="hr hr-24"></div>
              
              
              
      	 </div>
         
         <!--内容区-->
         <div class="row" style="min-height:600px;" id="electronicFenceContent">
         		
               
    

                                           
                            

                            

                            

                            

                            <!-- PAGE CONTENT ENDS -->
                        </div>

            
         </div>	
         
          
          
          <!--页脚-->
          
          <div class="footer">
            <div class="footer-inner" > 
              <!-- #section:basics/footer -->
              <div class="footer-content "  style=" min-width:1713px;" > <span class="bigger-120"> 衡阳市和仲通讯科技有限公司 &copy; 2016-2018 </span> &nbsp; &nbsp; <span class="action-buttons"> <a href="#"> <i class="ace-icon fa fa-twitter-square light-blue bigger-150"></i> </a> <a href="#"> <i class="ace-icon fa fa-facebook-square text-primary bigger-150"></i> </a> <a href="#"> <i class="ace-icon fa fa-rss-square orange bigger-150"></i> </a> </span> </div>
              
              <!-- /section:basics/footer --> 
            </div>
          </div>
          
          <!-- PAGE CONTENT ENDS --> 
        </div>
        <!-- /.col --> 
      </div>
      <!-- /.row --> 
    </div>
    <!-- /.page-content --> 
  </div>
</div>
<!-- /.main-content --> 

<!--<a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
				<i class="ace-icon fa fa-angle-double-up icon-only bigger-110"></i>
			</a>-->
</div>
<!-- /.main-container --> 

<!-- basic scripts --> 

<script type="text/javascript">
			if('ontouchstart' in document.documentElement) document.write("<script src='../static/ace/components/_mod/jquery.mobile.custom/jquery.mobile.custom.js'>"+"<"+"/script>");
		</script> 
<script src="../static/ace/components/bootstrap/dist/js/bootstrap.js"></script> 

<!--时间控制插件--> 

<script src="../static/ace/components/bootstrap-datetimepicker-master/js/bootstrap-datetimepicker.min.js"></script> 

<!-- ace scripts --> 
<script src="../static/ace/assets/js/src/elements.scroller.js"></script> 
<script src="../static/ace/assets/js/src/elements.colorpicker.js"></script> 
<script src="../static/ace/assets/js/src/elements.fileinput.js"></script> 
<script src="../static/ace/assets/js/src/elements.typeahead.js"></script> 
<script src="../static/ace/assets/js/src/elements.wysiwyg.js"></script> 
<script src="../static/ace/assets/js/src/elements.spinner.js"></script> 
<script src="../static/ace/assets/js/src/elements.treeview.js"></script> 
<script src="../static/ace/assets/js/src/elements.wizard.js"></script> 
<script src="../static/ace/assets/js/src/elements.aside.js"></script> 
<script src="../static/ace/assets/js/src/ace.js"></script> 
<script src="../static/ace/assets/js/src/ace.basics.js"></script> 
<script src="../static/ace/assets/js/src/ace.scrolltop.js"></script> 
<script src="../static/ace/assets/js/src/ace.ajax-content.js"></script> 
<script src="../static/ace/assets/js/src/ace.touch-drag.js"></script> 
<script src="../static/ace/assets/js/src/ace.sidebar.js"></script> 
<script src="../static/ace/assets/js/src/ace.sidebar-scroll-1.js"></script> 
<script src="../static/ace/assets/js/src/ace.submenu-hover.js"></script> 
<script src="../static/ace/assets/js/src/ace.widget-box.js"></script> 
<script src="../static/ace/assets/js/src/ace.settings.js"></script> 
<script src="../static/ace/assets/js/src/ace.settings-rtl.js"></script> 
<script src="../static/ace/assets/js/src/ace.settings-skin.js"></script> 
<script src="../static/ace/assets/js/src/ace.widget-on-reload.js"></script> 
<script src="../static/ace/assets/js/src/ace.searchbox-autocomplete.js"></script> 

<!-- inline scripts related to this page -->

</body>
</html>